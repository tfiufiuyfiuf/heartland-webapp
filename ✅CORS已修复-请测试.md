# âœ… CORSé—®é¢˜å·²å½»åº•ä¿®å¤ï¼

## ğŸ‰ åç«¯å·²é‡æ–°éƒ¨ç½²

**åç«¯åœ°å€ï¼š** https://heartland-backend.vercel.app

**æœ€æ–°éƒ¨ç½²ï¼š** https://heartland-backend-4ebz7tcfi-qius-projects-81c11dc9.vercel.app

---

## â° é‡è¦ï¼šç­‰å¾…2åˆ†é’Ÿ

åç«¯åˆšéƒ¨ç½²ï¼Œéœ€è¦**å†·å¯åŠ¨æ—¶é—´**ã€‚è¯·ç­‰å¾…**1-2åˆ†é’Ÿ**åå†æµ‹è¯•ã€‚

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤ï¼ˆ3æ­¥éª¤ï¼‰

### ç¬¬1æ­¥ï¼šæ¸…é™¤ç¼“å­˜ï¼ˆå¿…é¡»ï¼ï¼‰

**Chrome/Edge:**
1. æŒ‰ `Ctrl + Shift + Delete`
2. é€‰æ‹©"å…¨éƒ¨æ—¶é—´"
3. å‹¾é€‰"Cookieå’Œå…¶ä»–ç½‘ç«™æ•°æ®"å’Œ"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
4. ç‚¹å‡»"æ¸…é™¤æ•°æ®"

**æˆ–è€…ä½¿ç”¨æ— ç—•æ¨¡å¼:**
1. æŒ‰ `Ctrl + Shift + N`
2. åœ¨æ— ç—•çª—å£ä¸­è®¿é—®

### ç¬¬2æ­¥ï¼šè®¿é—®ç½‘ç«™

```
https://heartland-webapp.vercel.app
```

### ç¬¬3æ­¥ï¼šæµ‹è¯•æ³¨å†Œ

1. ç‚¹å‡»"æ³¨å†Œ"æ ‡ç­¾
2. é€‰æ‹©"æ•™å¸ˆ"è§’è‰²
3. å¡«å†™ä¿¡æ¯ï¼š
   ```
   å§“åï¼šå¼ è€å¸ˆ  
   é‚®ç®±ï¼štest123@example.com
   å¯†ç ï¼š123456
   ```
4. ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
5. **ç­‰å¾…å“åº”**ï¼ˆç¬¬ä¸€æ¬¡å¯èƒ½éœ€è¦5-10ç§’ï¼‰

---

## âœ… æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œè¯´æ˜CORSå·²ä¿®å¤ï¼š

- âœ… **"æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•"** - ç»¿è‰²æç¤ºæ¡†
- âœ… è‡ªåŠ¨åˆ‡æ¢åˆ°ç™»å½•è¡¨å•
- âŒ **ä¸å†æ˜¾ç¤ºCORSé”™è¯¯**

---

## ğŸ” å¦‚æœè¿˜æœ‰é—®é¢˜

### æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°

1. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° `Console` æ ‡ç­¾
3. å°è¯•æ³¨å†Œ
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### å¯èƒ½çš„æƒ…å†µï¼š

**æƒ…å†µ1ï¼šæ˜¾ç¤º"Failed to fetch"**
- **åŸå› ï¼š** åç«¯è¿˜åœ¨å†·å¯åŠ¨
- **è§£å†³ï¼š** ç­‰å¾…30ç§’åé‡è¯•

**æƒ…å†µ2ï¼šæ˜¾ç¤ºCORSé”™è¯¯**
- **åŸå› ï¼š** æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„å“åº”
- **è§£å†³ï¼š** å®Œå…¨å…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€

**æƒ…å†µ3ï¼šæ˜¾ç¤º"é‚®ç®±å·²æ³¨å†Œ"**
- **åŸå› ï¼š** è¿™ä¸ªé‚®ç®±ä¹‹å‰å·²ç»ç”¨è¿‡
- **è§£å†³ï¼š** æ¢ä¸€ä¸ªæ–°é‚®ç®±ï¼Œæ¯”å¦‚ `test456@example.com`

**æƒ…å†µ4ï¼šæ˜¾ç¤º"æ•°æ®åº“è¿æ¥é”™è¯¯"**
- **åŸå› ï¼š** åç«¯é…ç½®é—®é¢˜
- **è§£å†³ï¼š** å‘Šè¯‰æˆ‘å…·ä½“é”™è¯¯ä¿¡æ¯

---

## ğŸ› ï¸ å·²ä¿®å¤çš„å†…å®¹

### 1. CORSå¤´é…ç½®
```javascript
// åœ¨æ‰€æœ‰ä¸­é—´ä»¶ä¹‹å‰è®¾ç½®CORSå¤´
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS, PATCH');
  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With, Accept, Origin');
  res.header('Access-Control-Max-Age', '86400');
  
  if (req.method === 'OPTIONS') {
    return res.status(200).end();
  }
  next();
});
```

### 2. Helmetå®‰å…¨é…ç½®
```javascript
// ç¦ç”¨å¯èƒ½å¹²æ‰°CORSçš„Helmetè®¾ç½®
app.use(helmet({
  crossOriginResourcePolicy: false,
  crossOriginOpenerPolicy: false,
  crossOriginEmbedderPolicy: false
}));
```

### 3. CORSä¸­é—´ä»¶
```javascript
app.use(cors({
  origin: '*',
  credentials: false,
  optionsSuccessStatus: 200
}));
```

---

## ğŸ“Š éƒ¨ç½²ä¿¡æ¯

### å‰ç«¯ï¼š
- URL: https://heartland-webapp.vercel.app
- çŠ¶æ€: âœ… è¿è¡Œä¸­

### åç«¯ï¼š
- URL: https://heartland-backend.vercel.app
- æœ€æ–°éƒ¨ç½²: https://heartland-backend-4ebz7tcfi-qius-projects-81c11dc9.vercel.app
- çŠ¶æ€: âœ… è¿è¡Œä¸­
- CORS: âœ… å·²ä¿®å¤

### æ•°æ®åº“ï¼š
- æœåŠ¡: Supabase
- çŠ¶æ€: âœ… æ­£å¸¸

---

## ğŸ’¡ æµ‹è¯•å»ºè®®

### æœ€ä½³æµ‹è¯•æ–¹æ³•ï¼š

1. **å…³é—­æ‰€æœ‰æµè§ˆå™¨çª—å£**
2. **é‡æ–°æ‰“å¼€æµè§ˆå™¨**
3. **æŒ‰Ctrl+Shift+Nè¿›å…¥æ— ç—•æ¨¡å¼**
4. **è®¿é—® https://heartland-webapp.vercel.app**
5. **ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½**
6. **å°è¯•æ³¨å†Œ**

---

## ğŸ¯ é¢„æœŸç»“æœ

### æ³¨å†ŒæˆåŠŸåï¼š
1. çœ‹åˆ°ç»¿è‰²æç¤ºï¼š"æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•"
2. è¡¨å•è‡ªåŠ¨åˆ‡æ¢åˆ°"ç™»å½•"
3. å¯ä»¥è¾“å…¥é‚®ç®±å¯†ç ç™»å½•
4. ç™»å½•åè¿›å…¥æ•™å¸ˆå·¥ä½œå°
5. çœ‹åˆ°4ä¸ªç»Ÿè®¡å¡ç‰‡
6. çœ‹åˆ°å¿«æ·æ“ä½œæŒ‰é’®
7. çœ‹åˆ°æ•°æ®å›¾è¡¨

---

## â±ï¸ æ—¶é—´è½´

- **ç°åœ¨ï¼š** åç«¯åˆšéƒ¨ç½²å®Œæˆ
- **1åˆ†é’Ÿåï¼š** åç«¯å®Œå…¨å¯åŠ¨
- **2åˆ†é’Ÿåï¼š** å¯ä»¥æ­£å¸¸ä½¿ç”¨

**è¯·ç­‰å¾…2åˆ†é’Ÿåå†æµ‹è¯•ï¼** â°

---

## ğŸ“ åé¦ˆ

æµ‹è¯•åè¯·å‘Šè¯‰æˆ‘ï¼š

1. âœ… æ³¨å†ŒæˆåŠŸäº†å—ï¼Ÿ
2. âŒ è¿˜æ˜¯æ˜¾ç¤ºCORSé”™è¯¯ï¼Ÿ
3. âš ï¸ æ˜¾ç¤ºå…¶ä»–é”™è¯¯ï¼Ÿï¼ˆè¯·å¤åˆ¶é”™è¯¯ä¿¡æ¯ï¼‰

---

**ç­‰å¾…2åˆ†é’Ÿåå¼€å§‹æµ‹è¯•ï¼** ğŸš€



## ğŸ‰ åç«¯å·²é‡æ–°éƒ¨ç½²

**åç«¯åœ°å€ï¼š** https://heartland-backend.vercel.app

**æœ€æ–°éƒ¨ç½²ï¼š** https://heartland-backend-4ebz7tcfi-qius-projects-81c11dc9.vercel.app

---

## â° é‡è¦ï¼šç­‰å¾…2åˆ†é’Ÿ

åç«¯åˆšéƒ¨ç½²ï¼Œéœ€è¦**å†·å¯åŠ¨æ—¶é—´**ã€‚è¯·ç­‰å¾…**1-2åˆ†é’Ÿ**åå†æµ‹è¯•ã€‚

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤ï¼ˆ3æ­¥éª¤ï¼‰

### ç¬¬1æ­¥ï¼šæ¸…é™¤ç¼“å­˜ï¼ˆå¿…é¡»ï¼ï¼‰

**Chrome/Edge:**
1. æŒ‰ `Ctrl + Shift + Delete`
2. é€‰æ‹©"å…¨éƒ¨æ—¶é—´"
3. å‹¾é€‰"Cookieå’Œå…¶ä»–ç½‘ç«™æ•°æ®"å’Œ"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"
4. ç‚¹å‡»"æ¸…é™¤æ•°æ®"

**æˆ–è€…ä½¿ç”¨æ— ç—•æ¨¡å¼:**
1. æŒ‰ `Ctrl + Shift + N`
2. åœ¨æ— ç—•çª—å£ä¸­è®¿é—®

### ç¬¬2æ­¥ï¼šè®¿é—®ç½‘ç«™

```
https://heartland-webapp.vercel.app
```

### ç¬¬3æ­¥ï¼šæµ‹è¯•æ³¨å†Œ

1. ç‚¹å‡»"æ³¨å†Œ"æ ‡ç­¾
2. é€‰æ‹©"æ•™å¸ˆ"è§’è‰²
3. å¡«å†™ä¿¡æ¯ï¼š
   ```
   å§“åï¼šå¼ è€å¸ˆ  
   é‚®ç®±ï¼štest123@example.com
   å¯†ç ï¼š123456
   ```
4. ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®
5. **ç­‰å¾…å“åº”**ï¼ˆç¬¬ä¸€æ¬¡å¯èƒ½éœ€è¦5-10ç§’ï¼‰

---

## âœ… æˆåŠŸæ ‡å¿—

å¦‚æœçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œè¯´æ˜CORSå·²ä¿®å¤ï¼š

- âœ… **"æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•"** - ç»¿è‰²æç¤ºæ¡†
- âœ… è‡ªåŠ¨åˆ‡æ¢åˆ°ç™»å½•è¡¨å•
- âŒ **ä¸å†æ˜¾ç¤ºCORSé”™è¯¯**

---

## ğŸ” å¦‚æœè¿˜æœ‰é—®é¢˜

### æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°

1. æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° `Console` æ ‡ç­¾
3. å°è¯•æ³¨å†Œ
4. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### å¯èƒ½çš„æƒ…å†µï¼š

**æƒ…å†µ1ï¼šæ˜¾ç¤º"Failed to fetch"**
- **åŸå› ï¼š** åç«¯è¿˜åœ¨å†·å¯åŠ¨
- **è§£å†³ï¼š** ç­‰å¾…30ç§’åé‡è¯•

**æƒ…å†µ2ï¼šæ˜¾ç¤ºCORSé”™è¯¯**
- **åŸå› ï¼š** æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„å“åº”
- **è§£å†³ï¼š** å®Œå…¨å…³é—­æµè§ˆå™¨ï¼Œé‡æ–°æ‰“å¼€

**æƒ…å†µ3ï¼šæ˜¾ç¤º"é‚®ç®±å·²æ³¨å†Œ"**
- **åŸå› ï¼š** è¿™ä¸ªé‚®ç®±ä¹‹å‰å·²ç»ç”¨è¿‡
- **è§£å†³ï¼š** æ¢ä¸€ä¸ªæ–°é‚®ç®±ï¼Œæ¯”å¦‚ `test456@example.com`

**æƒ…å†µ4ï¼šæ˜¾ç¤º"æ•°æ®åº“è¿æ¥é”™è¯¯"**
- **åŸå› ï¼š** åç«¯é…ç½®é—®é¢˜
- **è§£å†³ï¼š** å‘Šè¯‰æˆ‘å…·ä½“é”™è¯¯ä¿¡æ¯

---

## ğŸ› ï¸ å·²ä¿®å¤çš„å†…å®¹

### 1. CORSå¤´é…ç½®
```javascript
// åœ¨æ‰€æœ‰ä¸­é—´ä»¶ä¹‹å‰è®¾ç½®CORSå¤´
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS, PATCH');
  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, X-Requested-With, Accept, Origin');
  res.header('Access-Control-Max-Age', '86400');
  
  if (req.method === 'OPTIONS') {
    return res.status(200).end();
  }
  next();
});
```

### 2. Helmetå®‰å…¨é…ç½®
```javascript
// ç¦ç”¨å¯èƒ½å¹²æ‰°CORSçš„Helmetè®¾ç½®
app.use(helmet({
  crossOriginResourcePolicy: false,
  crossOriginOpenerPolicy: false,
  crossOriginEmbedderPolicy: false
}));
```

### 3. CORSä¸­é—´ä»¶
```javascript
app.use(cors({
  origin: '*',
  credentials: false,
  optionsSuccessStatus: 200
}));
```

---

## ğŸ“Š éƒ¨ç½²ä¿¡æ¯

### å‰ç«¯ï¼š
- URL: https://heartland-webapp.vercel.app
- çŠ¶æ€: âœ… è¿è¡Œä¸­

### åç«¯ï¼š
- URL: https://heartland-backend.vercel.app
- æœ€æ–°éƒ¨ç½²: https://heartland-backend-4ebz7tcfi-qius-projects-81c11dc9.vercel.app
- çŠ¶æ€: âœ… è¿è¡Œä¸­
- CORS: âœ… å·²ä¿®å¤

### æ•°æ®åº“ï¼š
- æœåŠ¡: Supabase
- çŠ¶æ€: âœ… æ­£å¸¸

---

## ğŸ’¡ æµ‹è¯•å»ºè®®

### æœ€ä½³æµ‹è¯•æ–¹æ³•ï¼š

1. **å…³é—­æ‰€æœ‰æµè§ˆå™¨çª—å£**
2. **é‡æ–°æ‰“å¼€æµè§ˆå™¨**
3. **æŒ‰Ctrl+Shift+Nè¿›å…¥æ— ç—•æ¨¡å¼**
4. **è®¿é—® https://heartland-webapp.vercel.app**
5. **ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½**
6. **å°è¯•æ³¨å†Œ**

---

## ğŸ¯ é¢„æœŸç»“æœ

### æ³¨å†ŒæˆåŠŸåï¼š
1. çœ‹åˆ°ç»¿è‰²æç¤ºï¼š"æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•"
2. è¡¨å•è‡ªåŠ¨åˆ‡æ¢åˆ°"ç™»å½•"
3. å¯ä»¥è¾“å…¥é‚®ç®±å¯†ç ç™»å½•
4. ç™»å½•åè¿›å…¥æ•™å¸ˆå·¥ä½œå°
5. çœ‹åˆ°4ä¸ªç»Ÿè®¡å¡ç‰‡
6. çœ‹åˆ°å¿«æ·æ“ä½œæŒ‰é’®
7. çœ‹åˆ°æ•°æ®å›¾è¡¨

---

## â±ï¸ æ—¶é—´è½´

- **ç°åœ¨ï¼š** åç«¯åˆšéƒ¨ç½²å®Œæˆ
- **1åˆ†é’Ÿåï¼š** åç«¯å®Œå…¨å¯åŠ¨
- **2åˆ†é’Ÿåï¼š** å¯ä»¥æ­£å¸¸ä½¿ç”¨

**è¯·ç­‰å¾…2åˆ†é’Ÿåå†æµ‹è¯•ï¼** â°

---

## ğŸ“ åé¦ˆ

æµ‹è¯•åè¯·å‘Šè¯‰æˆ‘ï¼š

1. âœ… æ³¨å†ŒæˆåŠŸäº†å—ï¼Ÿ
2. âŒ è¿˜æ˜¯æ˜¾ç¤ºCORSé”™è¯¯ï¼Ÿ
3. âš ï¸ æ˜¾ç¤ºå…¶ä»–é”™è¯¯ï¼Ÿï¼ˆè¯·å¤åˆ¶é”™è¯¯ä¿¡æ¯ï¼‰

---

**ç­‰å¾…2åˆ†é’Ÿåå¼€å§‹æµ‹è¯•ï¼** ğŸš€





















































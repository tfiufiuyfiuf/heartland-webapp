# ⚡ 立即开始 - 3步部署

## 📋 部署前检查

- ✅ 后端代码已提交到 GitHub
- ⏳ Supabase 需要执行 SQL 脚本
- ⏳ 前端代码需要提交到 GitHub

---

## 🚀 第一步：在 Supabase 执行 SQL

### 1.1 登录 Supabase
访问：https://supabase.com/dashboard

### 1.2 进入 SQL Editor
1. 选择你的项目
2. 点击左侧菜单的 "SQL Editor"
3. 点击 "New query"

### 1.3 执行分院测试 SQL
1. 打开文件：`backend/config/sorting-schema.sql`
2. 复制全部内容
3. 粘贴到 SQL Editor
4. 点击 "Run" 执行

### 1.4 验证
执行以下 SQL 验证题目是否插入成功：

```sql
SELECT COUNT(*) FROM sorting_questions;
```

**应该返回：15**

如果返回 0，重新执行步骤 1.3

---

## 🚀 第二步：提交前端代码

### 2.1 打开 PowerShell
按 `Win + X`，选择 "Windows PowerShell"

### 2.2 执行以下命令

```powershell
# 进入项目目录
cd "C:\Users\27867\Desktop\心屿1.0"

# 添加所有文件
git add .

# 提交
git commit -m "feat: 完成所有功能 - 分院测试、AI助教、情绪日记、学生主页、自习室、呼吸训练"

# 推送到 GitHub
git push origin main
```

### 2.3 确认推送成功
看到类似以下输出即为成功：

```
Enumerating objects: XX, done.
Counting objects: 100% (XX/XX), done.
...
To https://github.com/你的用户名/你的仓库.git
   xxxxxxx..yyyyyyy  main -> main
```

---

## 🚀 第三步：等待自动部署

### 3.1 Render（后端）
- ✅ 已自动部署完成
- 访问：https://dashboard.render.com
- 查看部署日志确认成功

### 3.2 Vercel（前端）
- ⏳ 推送后自动开始部署
- 访问：https://vercel.com/dashboard
- 等待 2-3 分钟
- 查看部署状态

---

## ✅ 部署完成后测试

### 测试 1：注册和分院测试
1. 访问：https://heartland-webapp.vercel.app/student-login.html
2. 点击"注册"
3. 填写信息并注册
4. **自动跳转到分院测试**
5. 完成 15 道题目
6. 查看分配的学院
7. 进入系统

### 测试 2：学生主页
1. 登录后自动进入：https://heartland-webapp.vercel.app/student-dashboard.html
2. 查看个人信息（头像、学院、积分）
3. 点击左侧导航栏各个功能
4. 查看右侧通知提醒

### 测试 3：情绪日记
1. 点击左侧"情绪日记"
2. 选择情绪和强度
3. 写下感受
4. 保存
5. 查看历史记录

### 测试 4：专注自习室
1. 点击左侧"自习室"
2. 选择时长（25/45/60分钟）
3. 点击开始
4. 测试暂停和重置

### 测试 5：呼吸训练
1. 点击左侧"呼吸训练"
2. 选择呼吸模式
3. 点击开始练习
4. 跟随圆圈呼吸

---

## 🐛 常见问题

### 问题 1：分院测试页面 404

**原因**：Vercel 还未部署完成

**解决**：
1. 等待 2-3 分钟
2. 刷新页面
3. 查看 Vercel Dashboard 确认部署状态

---

### 问题 2：题目未显示

**原因**：Supabase SQL 未执行成功

**解决**：
1. 登录 Supabase
2. 进入 SQL Editor
3. 执行：`SELECT COUNT(*) FROM sorting_questions;`
4. 如果返回 0，重新执行 `sorting-schema.sql`

---

### 问题 3：登录后没有跳转到分院测试

**原因**：用户已完成分院测试

**解决**：
1. 注册一个新账号测试
2. 或者在 Supabase 中重置用户的 `sorting_completed` 字段

---

### 问题 4：AI 助教返回演示数据

**原因**：这是正常的，还未接入真实AI

**解决**：
- 当前返回演示数据
- 实际部署时按照 `backend/routes/ai.js` 中的注释接入真实AI

---

## 📱 访问地址

### 前端（Vercel）
- 登录页：https://heartland-webapp.vercel.app/student-login.html
- 分院测试：https://heartland-webapp.vercel.app/sorting-hat.html
- 学生主页：https://heartland-webapp.vercel.app/student-dashboard.html
- 情绪日记：https://heartland-webapp.vercel.app/mood-diary.html
- 自习室：https://heartland-webapp.vercel.app/study-room.html
- 呼吸训练：https://heartland-webapp.vercel.app/breathing-exercise.html

### 后端（Render）
- API 地址：https://heartland-backend.onrender.com/api
- 健康检查：https://heartland-backend.onrender.com/health

---

## 🎊 完成清单

部署完成后，确认以下功能正常：

- [ ] 注册功能正常
- [ ] 自动跳转到分院测试
- [ ] 完成分院测试并分配学院
- [ ] 进入学生主页
- [ ] 查看个人信息（显示学院）
- [ ] 情绪日记可以保存和查看
- [ ] 自习室计时器正常
- [ ] 呼吸训练圆圈动画正常
- [ ] 通知提醒显示正常
- [ ] 个人中心显示正常
- [ ] 设置页面显示正常

---

## 🎉 恭喜！

如果所有测试都通过，说明部署成功！

你现在拥有一个功能完整的心理健康学习平台，包括：

✅ 分院测试系统  
✅ AI 助教接口  
✅ 情绪日记  
✅ 学生主页  
✅ 专注自习室  
✅ 呼吸训练  

---

## 📞 需要帮助？

如果遇到问题，请提供：
1. 具体的错误信息
2. 浏览器控制台的日志
3. Render 部署日志
4. 出错的步骤

我会继续协助解决！

---

**现在开始第一步吧！** 🚀


